{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 7b33cbb7ae3d47b3daca","webpack:///src/app/main/App.fsx","webpack:///external \"THREE\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","width","window","innerWidth","height","innerHeight","initLights","scene","ambientLight","__WEBPACK_IMPORTED_MODULE_0_three__","add","spotLight","position","set","initCamera","camera","matrixAutoUpdate","rotationAutoUpdate","z","initRenderer","container","document","getElementById","renderer","setClearColor","setSize","innerHTML","appendChild","domElement","initGeometry","cubeStart","matProps","color","cube","fromGeometry","mesh","action","autoUpdate","render","rotateX","rotateY","rotateZ","animate","dt","requestAnimationFrame","delegateArg0","patternInput_169","__WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__","THREE"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = width;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = height;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = initLights;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = initCamera;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = initRenderer;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = initGeometry;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = action;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return scene; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return renderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return cube; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return camera; });\n/* harmony export (immutable) */ __webpack_exports__[\"l\"] = render;\n/* harmony export (immutable) */ __webpack_exports__[\"m\"] = animate;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_three__);\n\nfunction width() {\n    return window.innerWidth / 2;\n}\nfunction height() {\n    return window.innerHeight / 2;\n}\nfunction initLights(scene) {\n    var ambientLight = new __WEBPACK_IMPORTED_MODULE_0_three__[\"AmbientLight\"](\"#3C3C3C\", 1);\n    scene.add(ambientLight);\n    var spotLight = new __WEBPACK_IMPORTED_MODULE_0_three__[\"SpotLight\"](\"#FFFFFF\");\n    spotLight.position.set(-30, 60, 60);\n    scene.add(spotLight);\n}\nfunction initCamera() {\n    var camera = new __WEBPACK_IMPORTED_MODULE_0_three__[\"PerspectiveCamera\"](75, width() / height(), 0.01, 1000);\n    camera.matrixAutoUpdate = true;\n    camera.rotationAutoUpdate = true;\n    camera.position.z = 2;\n    return camera;\n}\nfunction initRenderer() {\n    var container = document.getElementById(\"graphicsContainer\");\n    var renderer = new __WEBPACK_IMPORTED_MODULE_0_three__[\"WebGLRenderer\"]();\n    renderer.setClearColor(\"#0A1D2D\");\n    renderer.setSize(width(), height());\n    container.innerHTML = \"\";\n    container.appendChild(renderer.domElement);\n    return renderer;\n}\nfunction initGeometry(scene) {\n    var cubeStart = new __WEBPACK_IMPORTED_MODULE_0_three__[\"BoxGeometry\"](1, 1, 1);\n    var matProps = {};\n    matProps.color = \"#9430B3\";\n    var cube = new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferGeometry\"]().fromGeometry(cubeStart);\n    var mesh = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Mesh\"](cube, new __WEBPACK_IMPORTED_MODULE_0_three__[\"MeshLambertMaterial\"](matProps));\n    scene.add(mesh);\n    return cube;\n}\nfunction action() {\n    var scene = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Scene\"]();\n    scene.autoUpdate = true;\n    initLights(scene);\n    var camera = initCamera();\n    var renderer = initRenderer();\n    var cube = initGeometry(scene);\n    return [renderer, scene, camera, cube];\n}\nvar patternInput_169 = action();\nvar scene = patternInput_169[1];\nvar renderer = patternInput_169[0];\nvar cube = patternInput_169[3];\nvar camera = patternInput_169[2];\nfunction render() {\n    cube.rotateX(0.003);\n    cube.rotateY(0.007);\n    cube.rotateZ(0.011);\n    renderer.render(scene, camera);\n}\nfunction animate(dt) {\n    window.requestAnimationFrame(function (delegateArg0) {\n        animate(delegateArg0);\n    });\n    render();\n}\nanimate(0);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__ = __webpack_require__(0);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"width\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"height\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"initLights\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"initCamera\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"initRenderer\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"initGeometry\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"f\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"action\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"g\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"scene\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"h\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"renderer\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"i\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"cube\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"j\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"camera\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"k\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"l\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"animate\", function() { return __WEBPACK_IMPORTED_MODULE_0__src_app_main_App_fsx__[\"m\"]; });\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = THREE;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7b33cbb7ae3d47b3daca","(*@\n    Layout = \"post\";\n    Title = \"Fable / Three.js  - Hello Cube\";\n    Date = \"2017-06-22T07:19:37\";\n    Tags = \"\";\n    Description = \"Showcasing Fable's power with a spinning cube\";\n*)\n(*** more ***)\n(**\n\n** Fable & ThreeJs: _Hello Cube_ **\n---------------------------------\n\n<div id=\"graphicsWrapper\"><div id=\"graphicsContainer\"></div></div>\n\n<script src=\"http://cdnjs.cloudflare.com/ajax/libs/three.js/r77/three.js\"></script>\n<script src=\"/otherOutput/fable1/BlogFableThreeHelloWorldBuild.js\"></script>\n\n**The F# to JS compiler [Fable](http://fable.io/) is looking ever more impressive. What better way to showcase its abilities than\nby putting a spinning a cube on your screen?...** The official Fable ThreeJs / WebGL [demo](http://fable.io/samples/webGLTerrain/index.html)\nis actually far superior to my effort here. This is a much cut-down version of that, to show how little code is needed to get F#\ndrawing 3D graphics in a browser.\n\n### _**First things** first_ ###\n\nYour machine will need .NET Core installed so you can use the dotnet command line tool. Assuming you have that, the quickest way to get started\nis to clone the official Fable [samples-browser](https://github.com/fable-compiler/samples-browser) repository and then run the `restore` script\ncontained within that repository, which will install the fable extensions to the dotnet command line tool and then go on to run `yarn install` and\n`dotnet restore` for you. This will pull down all the required npm (javascript) and paket (dotnet / nuget) dependencies. You can then replace the\ncode in the samples-browser/webGLTerrain/src/App.fs file with the below. _Note that you should comment out the first two lines of the below code\n(which are necessary only as I'm writing an fsx script file for this blog, and you'll be writing a standard fs file)_. Once you've copied, pasted\nand commented the code, you can then run `dotnet fable npm-run start` to compile the code to javascript and launch a dev server, then browse to\n`http://localhost:8080/webGLTerrain` (which should actually now show you a plain spinning cube rather than fancy terrain). Talking of the code,\nthe first lines are below. Initially we just import the necessary namespaces and modules, then we define two functions to return the desired\nsize of the graphics canvas.\n\n*)\n\n#r \"../../../packages/Fable.Core/lib/netstandard1.6/Fable.Core.dll\"     // Comment out if you are writing an fs file\n#load \"../../../node_modules/fable-import-three/Fable.Import.Three.fs\"  // Comment out if you are writing an fs file\n\nopen System\nopen Fable.Core\nopen Fable.Core.JsInterop\nopen Fable.Import\nopen Fable.Import.Three\n\nlet width () = Browser.window.innerWidth / 2.0;\nlet height () = Browser.window.innerHeight / 2.0\n\n(**\n\n#### _**1:** Lights_ ####\n\nOur scene needs lights (so we can see stuff).The below function add a dim ambient light and\na bright spotlight to the scene.\n\n*)\n\nlet initLights (scene:Scene) =\n\n    let ambientLight = Three.AmbientLight(U2.Case2 \"#3C3C3C\", 1.0)\n    scene.add(ambientLight)\n\n    let spotLight = Three.SpotLight(U2.Case2 \"#FFFFFF\")\n    spotLight.position.set(-30., 60., 60.) |> ignore\n    //spotLight.castShadow <- true\n    scene.add(spotLight)\n\n(**\n\n### _**2:** Camera_ ###\n\nWe also need a camera, which sets the location that the scene is viewed from. We also need to set the\naspect ration of the field of view. We use the width and height functions we defined above so that the\ncamera field's aspect will match the intended dimensions of our graphics output area. The last line of\nthe function is its return value; so the camera is returned back to the caller so that it can be used\nduring rendering.\n\n*)\n\nlet initCamera () =\n\n    let camera = Three.PerspectiveCamera(75.0, width() / height(), 0.01, 1000.0)\n    camera.matrixAutoUpdate <- true\n    camera.rotationAutoUpdate <- true\n    camera.position.z <- 2.0\n    camera\n\n(**\n\n#### _**3:** Renderer_ ####\n\nOK, so not quite a case of lights-camera-action, as we now need a renderer. A renderer is kind of\nanalogous to a screen, and embodies the output area for our graphics. We have to tell Three which\nDOM element of our page to put the render target into. We also get to choose which kind of renderer\nto use. WebGLRenderer is the fastest, but Three does support other renderers that could be used on\ndevices without WebGL support. The call to setClearColour sets the background colour for areas of\nthe screen that are not otherwise drawn on. Again we set the size of the output area using the\nwidth and height functions that we defined above, so that the output dimensions tie up with the\naspect ratio of the camera.\n\n*)\n\nlet initRenderer () =\n\n    let container = Browser.document.getElementById(\"graphicsContainer\")\n    let renderer = Three.WebGLRenderer()\n\n    renderer.setClearColor(\"#0A1D2D\")\n    (renderer :> Three.Renderer).setSize(width(), height())\n    // Set antialias tbd...\n    container.innerHTML <- \"\"\n    container.appendChild((renderer :> Three.Renderer).domElement) |> ignore\n\n    renderer\n\n(**\n\n### _**4:** Geometry_ ###\n\nNearly there, but not quite like the movies. Now we have to create something to star in our scene.\nWe have only one cast member, a simple cube. Fortunately Three provides methods for defining most\nstandard geometric shapes, so we don't have to build it up out of individual triangles. Each object\nalso needs its surface properties defining (so that we know what it should look like). Here we say\nthat our cube's surface is made from a Lambert type material (which would allow for some shininess,\nbut we don't set that up here and just go for a plain purple matt surface). We buffer the cube's\ngeometry, which moves it to a more compact internal representation (for better performance) and then\ncombine it's shape and material definition together into a mesh. Finally we add the mesh to the scene\nand also return the cube geometry for later use.\n\n*)\n\nlet initGeometry(scene:Scene) =\n\n    let cubeStart = Three.BoxGeometry(1., 1., 1.)\n\n    let matProps = createEmpty<Three.MeshLambertMaterialParameters>\n    matProps.color <- Some (U2.Case2 \"#9430B3\")\n\n    let cube = Three.BufferGeometry().fromGeometry(cubeStart);\n    let mesh = Three.Mesh(cube, Three.MeshLambertMaterial(matProps))\n\n    scene.add(mesh)\n    cube\n\n(**\n\n#### _**5:** Action_ ####\n\nFinally we're there. We can create a Scene and initialise all required elements. We return a\n4-tuple of the 4 key graphics elements back to the caller so that those elements can be used\nlater on in rendering / animation.\n\n*)\n\nlet action() =\n\n    let scene = Three.Scene()\n    scene.autoUpdate <- true\n\n    initLights scene\n    let camera = initCamera ()\n    let renderer = initRenderer ()\n    let cube = initGeometry scene\n\n    renderer, scene, camera, cube\n\nlet renderer, scene, camera, cube = action()\n\n(**\n\n### _**Making it** move_ ###\n\nSo, as we're using the movies as an analogy, we actually ought to add some movement to the scene,\na spinning cube is going to be much more impressive than a static one. Each frame we rotate the\ncube a little about each of its axes to make it appear to spin. The use of requestAnimationFrame\n(rather than a loop) ensures that the animation is paused if the render's target element isn't\non screen.\n\n*)\n\nlet render() =\n    cube.rotateX ( 0.003 ) |> ignore\n    cube.rotateY ( 0.007 ) |> ignore\n    cube.rotateZ ( 0.011 ) |> ignore\n    renderer.render(scene, camera)\n\nlet rec animate (dt:float) =\n    Browser.window.requestAnimationFrame(Func<_,_> animate) |> ignore\n    render()\n\nanimate(0.0) // Start the animation going\n\n\n\n\n// WEBPACK FOOTER //\n// src/app/main/App.fsx","module.exports = THREE;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}